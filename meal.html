<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meal Planning & Recipe Suggestions</title>

  <style>
    :root {
      --bg: #ffffff;
      --soft: #f3fff7;
      --brand: #bfeedd;
      --brand-600: #8fdab3;
      --ink: #0f1720;
      --muted: #6b7280;
      --card: #fbfdfb;
      --radius: 14px;
      --shadow: 0 8px 30px rgba(16,24,40,0.06);
      font-family: Inter, system-ui, "Segoe UI", Roboto;
      color: var(--ink);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      height: 100%;
      background: linear-gradient(180deg, var(--bg), #f7fff8);
    }

    .app {
      display: grid;
      grid-template-columns: 270px 1fr;
      gap: 22px;
      padding: 26px;
      height: 100vh;
      align-items: start;
    }

    /* Sidebar */
    .sidebar {
      background: var(--card);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
      height: calc(100vh - 52px);
      position: sticky;
      top: 26px;
      display: flex;
      flex-direction: column;
    }

    .brand {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 20px;
    }

    .logo {
      width: 52px;
      height: 52px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--brand-600), var(--brand));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #063;
      box-shadow: 0 8px 20px rgba(127,215,173,0.16);
    }

    .brand-text h1 { margin: 0; font-size: 18px; }
    .brand-text small { color: var(--muted); font-size: 12px; }

    .nav {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 10px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px;
      border-radius: 10px;
      color: var(--ink);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.18s ease;
    }

    .nav-item:hover { background: var(--soft); }

    .nav-item.active {
      background: linear-gradient(90deg, var(--brand-600), var(--brand));
      color: white;
      box-shadow: 0 6px 18px rgba(127,215,173,0.14);
    }

    .nav-item .icon { width: 28px; text-align: center; }
    .spacer { flex: 1; }
    .logout { border: 1px solid rgba(0,0,0,0.06); padding: 12px; border-radius: 12px; }

    /* Main */
    .main {
      display: flex;
      flex-direction: column;
      gap: 18px;
      height: 100%;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .topbar h2 { margin: 0; }

    .subtitle { color: var(--muted); font-size: 13px; margin-bottom: 12px; }

    .user { display: flex; align-items: center; gap: 12px; }
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 20px;
      background: linear-gradient(90deg, #d1d6ff, #c9f6df);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }

    .tab {
      border: 1px solid rgba(0, 0, 0, 0.1);
      background: #fff;
      border-radius: 999px;
      padding: 8px 14px;
      font-weight: 700;
      cursor: pointer;
    }

    .tab.active {
      background: linear-gradient(90deg, var(--brand-600), var(--brand));
      color: white;
      box-shadow: 0 0 0 3px rgba(127,215,173,0.25);
    }

    /* Cards & Planner */
    .cards.three {
      display: grid;
      grid-template-columns: repeat(3, minmax(220px, 1fr));
      gap: 16px;
    }

    .card {
      background: linear-gradient(180deg, var(--card), #ffffff);
      border-radius: 12px;
      padding: 14px;
      box-shadow: var(--shadow);
    }

    .sug-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; }

    .sug-item {
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 10px;
      padding: 10px 12px;
      background: #fff;
      cursor: pointer;
    }

    .sug-item:hover { border-color: var(--brand-600); transform: translateY(-2px); transition: all 0.15s ease; }

    .sug-item .title { font-weight: 700; }
    .sug-item .meta { color: var(--muted); font-size: 12px; }

    .planner-grid { display: grid; grid-template-columns: repeat(3, minmax(280px, 1fr)); gap: 16px; }
    .day-card {
      background: var(--card);
      border-radius: 12px;
      padding: 12px;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
    }
    .day-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 800;
      margin-bottom: 8px;
    }
    .add-day-btn {
      border: none;
      background: linear-gradient(90deg, var(--brand-600), var(--brand));
      color: #000;
      border-radius: 50%;
      width: 34px;
      height: 34px;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
    }

    .meal {
      border: 1px dashed rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      padding: 10px;
      margin-bottom: 8px;
    }

    .meal h3 { margin: 0 0 6px; font-size: 14px; }
    .meal-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 6px; }
    .meal-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border: 1px solid rgba(0, 0, 0, 0.05);
      border-radius: 10px;
      padding: 8px 10px;
      background: #fff;
    }
    .meal-item .name { font-weight: 600; cursor: pointer; }
    .icon-btn { border: 1px solid rgba(0, 0, 0, 0.06); background: #fff; border-radius: 8px; padding: 6px; cursor: pointer; }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .modal.show { display: flex; }
    .modal-backdrop { position: absolute; inset: 0; background: rgba(0, 0, 0, 0.5); }
    .modal-dialog {
      position: relative;
      background: #fff;
      width: 520px;
      max-width: 90%;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      z-index: 1;
    }
    .modal-header {
      background: linear-gradient(90deg, var(--brand-600), var(--brand));
      color: #000;
      padding: 16px 20px;
      font-weight: 800;
      font-size: 18px;
    }
    .modal-body {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .modal-body label { font-weight: 600; font-size: 14px; display: flex; flex-direction: column; gap: 6px; }
    .modal-body input, .modal-body select {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      font-size: 14px;
    }
    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      padding: 16px 20px;
      border-top: 1px solid rgba(0, 0, 0, 0.05);
    }
    .btn { background: linear-gradient(90deg, var(--brand-600), var(--brand)); color: #fff; border: none; padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: 600; }
    .btn.ghost { background: transparent; border: 1px solid rgba(0, 0, 0, 0.06); color: var(--ink); }
  </style>
</head>

<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">GE</div>
        <div class="brand-text">
          <h1>GrocerEase</h1>
          <small>Smart Grocery Manager</small>
        </div>
      </div>

      <nav class="nav">
        <a href="dashboard.php" class="nav-item"><span class="icon">üè†</span> Dashboard</a>
        <a href="items.php" class="nav-item"><span class="icon">üßæ</span> Grocery List</a>
        <a href="#" class="nav-item active"><span class="icon">üç≥</span> Meal Planning</a>
        <a href="inventory.html" class="nav-item"><span class="icon">üì¶</span> Inventory</a>
        <a href="budget.php" class="nav-item"><span class="icon">üí≤</span> Budgeting</a>
        <div class="spacer"></div>
        <a href="#" class="nav-item logout"><span class="icon">‚Ü™</span> Logout</a>
      </nav>
    </aside>

    <!-- Main -->
    <main class="main">
      <div class="topbar">
        <h2>Meal Planning & Recipe Suggestions</h2>
        <div class="user"><div class="avatar">M</div></div>
      </div>
      <p class="subtitle">Plan your week and discover new meals using smart suggestions.</p>

      <div class="tabs">
        <button class="tab active" data-tab="suggestions">Recipe Suggestions</button>
        <button class="tab" data-tab="planner">Weekly Meal Planner</button>
      </div>

      <section id="suggestionsView">
        <div class="cards three">
          <article class="card"><h2>üç≥ Breakfast</h2><ul id="sugBreakfast" class="sug-list"></ul></article>
          <article class="card"><h2>ü•ó Lunch</h2><ul id="sugLunch" class="sug-list"></ul></article>
          <article class="card"><h2>üçù Dinner</h2><ul id="sugDinner" class="sug-list"></ul></article>
        </div>
        <p class="subtitle">Tip: Click a recipe to add it to the planner.</p>
      </section>

      <section id="plannerView" hidden>
        <div id="plannerGrid" class="planner-grid"></div>
      </section>
    </main>
  </div>

  <!-- JavaScript -->
  <script>
    const MP_LS_KEY='ge_meal_planner_v1';
    const DAYS=['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];
    const MEALS=['Breakfast','Lunch','Dinner'];
    const $=(s,r=document)=>r.querySelector(s);
    const $$=(s,r=document)=>Array.from(r.querySelectorAll(s));

    const RECIPES={
      Breakfast:[{name:'Avocado Toast',meta:'15m ‚Ä¢ Avocado ‚Ä¢ Bread ‚Ä¢ Egg'},{name:'Greek Yogurt Parfait',meta:'10m ‚Ä¢ Yogurt ‚Ä¢ Berries ‚Ä¢ Granola'},{name:'Oatmeal Bowl',meta:'10m ‚Ä¢ Oats ‚Ä¢ Banana ‚Ä¢ Honey'}],
      Lunch:[{name:'Chicken Salad',meta:'20m ‚Ä¢ Chicken ‚Ä¢ Lettuce ‚Ä¢ Dressing'},{name:'Veggie Stir-fry',meta:'25m ‚Ä¢ Broccoli ‚Ä¢ Carrot ‚Ä¢ Soy Sauce'},{name:'Quinoa Bowl',meta:'25m ‚Ä¢ Quinoa ‚Ä¢ Chickpeas ‚Ä¢ Spinach'}],
      Dinner:[{name:'Salmon Teriyaki',meta:'30m ‚Ä¢ Salmon ‚Ä¢ Teriyaki ‚Ä¢ Rice'},{name:'Pasta Primavera',meta:'30m ‚Ä¢ Pasta ‚Ä¢ Veggies ‚Ä¢ Parmesan'},{name:'Beef Tacos',meta:'25m ‚Ä¢ Beef ‚Ä¢ Tortillas ‚Ä¢ Salsa'}]
    };

    function readPlanner(){try{const d=JSON.parse(localStorage.getItem(MP_LS_KEY))||{};for(const day of DAYS){d[day]??={};for(const m of MEALS)d[day][m]??=[];}return d;}catch{return Object.fromEntries(DAYS.map(d=>[d,{Breakfast:[],Lunch:[],Dinner:[]}]))}}
    function writePlanner(p){localStorage.setItem(MP_LS_KEY,JSON.stringify(p));}

    function renderSuggestions(){
      const map={Breakfast:$('#sugBreakfast'),Lunch:$('#sugLunch'),Dinner:$('#sugDinner')};
      for(const meal in RECIPES){
        map[meal].innerHTML='';
        RECIPES[meal].forEach(r=>{
          const li=document.createElement('li');li.className='sug-item';
          li.innerHTML=`<div class="title">${r.name}</div><div class="meta">${r.meta}</div>`;
          li.onclick=()=>openAddMealModal(null,r.name,meal,true);
          map[meal].appendChild(li);
        });
      }
    }

    function renderPlanner(){
      const grid=$('#plannerGrid');grid.innerHTML='';
      const p=readPlanner();
      DAYS.forEach(day=>{
        const card=document.createElement('article');card.className='day-card';
        card.innerHTML=`<div class="day-head"><span>${day}</span><button class="add-day-btn" title="Add meal">+</button></div>`;
        MEALS.forEach(meal=>{
          const sec=document.createElement('section');sec.className='meal';
          sec.innerHTML=`<h3>${meal}</h3><ul class="meal-list"></ul>`;
          const ul=$('.meal-list',sec);
          (p[day][meal]||[]).forEach((n,i)=>ul.appendChild(makeMealItem(day,meal,n,i)));
          card.appendChild(sec);
        });
        $('.add-day-btn',card).onclick=()=>openAddMealModal(day);
        grid.appendChild(card);
      });
    }

    function makeMealItem(day,meal,name,i){
      const li=document.createElement('li');li.className='meal-item';
      li.innerHTML=`<span class="name">${name}</span><span class="actions"><button class="icon-btn">üóëÔ∏è</button></span>`;
      const nameEl=$('.name',li);
      nameEl.onclick=()=>{
        const input=document.createElement('input');input.value=name;nameEl.replaceWith(input);input.focus();
        input.onblur=()=>save(input.value);input.onkeydown=e=>{if(e.key==='Enter')save(input.value);};
        function save(v){const p=readPlanner();p[day][meal][i]=v.trim()||name;writePlanner(p);renderPlanner();}
      };
      $('.icon-btn',li).onclick=()=>{const p=readPlanner();p[day][meal].splice(i,1);writePlanner(p);renderPlanner();};
      return li;
    }

    function openAddMealModal(day,preName='',preType='Breakfast',fromSuggestion=false){
      const today=new Date().toLocaleDateString('en-US',{weekday:'long'});
      const m=document.createElement('div');m.className='modal show';
      m.innerHTML=`
        <div class="modal-backdrop" data-close></div>
        <div class="modal-dialog">
          <div class="modal-header">${fromSuggestion?'Add to Planner':day?`Add Meal for ${day}`:'Add to Planner'}</div>
          <div class="modal-body">
            <label>Day<select id="mealDay">${DAYS.map(d=>`<option ${d===today?'selected':''}>${d}</option>`).join('')}</select></label>
            ${!fromSuggestion?`<label>Meal Type<select id="mealType">${MEALS.map(x=>`<option ${x===preType?'selected':''}>${x}</option>`).join('')}</select></label>`:''}
            <label>Meal Name<input id="mealName" value="${preName}" placeholder="e.g. Chicken Curry"/></label>
          </div>
          <div class="modal-actions">
            <button class="btn ghost" data-close>Cancel</button>
            <button id="addConfirm" class="btn">Add</button>
          </div>
        </div>`;
      document.body.appendChild(m);
      const close=()=>m.remove();
      m.querySelectorAll('[data-close]').forEach(b=>b.onclick=close);
      m.querySelector('.modal-backdrop').onclick=close;
      $('#addConfirm',m).onclick=()=>{
        const d=$('#mealDay',m).value;
        const type=fromSuggestion?preType:$('#mealType',m).value;
        const name=$('#mealName',m).value.trim();
        if(!name)return;
        const p=readPlanner();
        p[d][type].push(name);
        writePlanner(p);
        close();
        renderPlanner();
        switchTab('planner');
      };
    }

    function switchTab(which){
      const sug=which==='suggestions';
      $('#suggestionsView').hidden=!sug;$('#plannerView').hidden=sug;
      $$('.tab').forEach(t=>t.classList.remove('active'));
      $(`.tab[data-tab="${which}"]`).classList.add('active');
      if(!sug)renderPlanner();
    }

    document.addEventListener('DOMContentLoaded',()=>{renderSuggestions();renderPlanner();$$('.tab').forEach(t=>t.onclick=()=>switchTab(t.dataset.tab));});
  </script>
</body>
</html>
